@{
    ViewBag.Title = "Edit Logo";
}

<div class="hero-unit">
<center>
<h1>Edit @Model.Name.</h1>
<br>
<h4>
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Basic Info", "Edit", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Theme", "Edit2", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "About", "Edit3", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Logo", "Edit4", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Location", "Edit5", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Hours", "Edit6", "Menu", new { id = Model.MenuId }) |
@MenuDart.Controllers.MenuExtensions.EditMenuItem(Html, "Contact", "Edit7", "Menu", new { id = Model.MenuId }) |
@Html.ActionLink("Menu Items", "Details", "MenuTree", new { id = Model.MenuId, parent = 0, idx = -1, source = "MenuEditor", ReturnUrl = "/Edit/" + Model.MenuId }, null) |
@Html.ActionLink("Preview", "PreviewMenu", "Menu", new { id = Model.MenuId }, null) |
@Html.ActionLink("Publish", "Publish", "Menu", new { ReturnUrl = "/Edit/" + Model.MenuId, id = Model.MenuId }, null)
</h4>
</center>
<br />
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Edit4", "Menu", FormMethod.Post, new { @class = "form-horizontal" }))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Update your restaurant's logo on this page.</legend>
        <br />
        @if (string.IsNullOrEmpty(Model.LogoUrl))
        {
            <text><b>No logo currently specified.</b></text>
        }
        else
        {
            <text>Current:<br /></text>
            <img src="@Model.LogoUrl" />          
        }

        <br />
        <br />

        @if (!string.IsNullOrEmpty(Model.LogoTmpUrl))
        {
            <text>New:<br /></text>
            <img src="@Model.LogoTmpUrl" />     
        <p>
            @Html.ActionLink("Replace Old Logo with New, Permanently", "LogoReplace", "Menu", new { id = @Model.MenuId }, null)
        </p>     
        }

        <link href="@Url.Content("~/Content/fileuploader.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/fileuploader.js")" type="text/javascript"></script>

	        <div id="file-uploader">		
		        <noscript>			
			        <p>Please enable JavaScript on your browser to be able to upload your business's logo.</p>
			        <!-- or put a simple form for upload here -->
		        </noscript>         
	        </div>
            <script>
                jQuery(function () {
                    var uploader = new qq.FileUploader({
                        element: document.getElementById('file-uploader'),
                        action: '/Menu/LogoUpload',
                        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
                        sizeLimit: 600000, // max size
                        multiple: false,
                        debug: true,
                        params: {
                            menuDartUrl: '@Model.MenuDartUrl',
                            replaceCurrent: 'false'
                        },
                        onComplete: function (id, fileName, responseJSON) {
                            window.location = '/Menu/Edit4/' + @Model.MenuId;
                        }
                    });
                });     

            </script>

        @if (!string.IsNullOrEmpty(Model.LogoUrl) && string.IsNullOrEmpty(Model.LogoTmpUrl))
        {
            @Html.ActionLink("I Don't Need a Logo", "LogoRemove", "Menu", new { ReturnUrl = "Edit4", id = @Model.MenuId }, null)
        }
    </fieldset>
}

<div>
    @Html.ActionLink("Back to Dashboard", "Index", "Dashboard")
</div>

</div> <!-- hero -->